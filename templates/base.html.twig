<!DOCTYPE html>
<html lang="fr" style="font-size: 14px; overflow-x: hidden;">
    <head>
        <meta charset="utf-8">
        <title>GESTION DU PARC AUTOMOBILE DU MINISTERE DE LA SANTE</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0">
        <meta name="apple-mobile-web-app-capable" content="yes">

        {% block stylesheets %}
            <link rel="icon" type="image/x-icon" href="{{ asset('img/favicon.ico') }}">            
            <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
            <link href="https://stackpath.bootstrapcdn.com/bootstrap/5.1.3/css/bootstrap.min.css" rel="stylesheet">
            <link href="{{ asset('vendor/fontawesome-free/css/all.min.css') }}" rel="stylesheet" type="text/css">
            <link href="{{ asset('css/theme.css') }}" rel="stylesheet">    
            <link href="{{ asset('css/mystyle.scss') }}" rel="stylesheet">    
            <link href="{{ asset('css/2.3e0fb6e6.chunk.css') }}" rel="stylesheet">
            <link href="{{ asset('css/main.985fc7ff.chunk.css') }}" rel="stylesheet">
            <link href="{{ asset('vendor/datatables/dataTables.bootstrap4.min.css') }}" rel="stylesheet">
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">


        {% endblock %}
    </head>


    <body>
        {% block body %}
            <div id="root">
                <div class="p-toast p-component p-toast-top-right">
                    <div>

                    </div>
                </div>
                <div class="layout-wrapper layout-static layout-theme-light">

                    <div class="layout-topbar">
                        <a class="layout-topbar-logo" href="#/">
                            <span>GESTION DU PARC &nbsp; </span>
                            <i class="fa fa-car"></i>
                        </a>
                        
                        <button type="button" class="p-link  layout-menu-button layout-topbar-button">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button type="button" class="p-link layout-topbar-menu-button  layout-topbar-button">
                            <i class="fa fa-ellipsis-v"></i>
                        </button>



                        {% for type, messages in app.session.flashbag.all %}
                            {% for message in messages %}
                                <div class="flash-message flash-{{ type }}">
                                    <span class="flash-close">&times;</span>
                                    {{ message }}
                                </div>
                            {% endfor %}
                        {% endfor %}



                        <ul class="layout-topbar-menu lg:flex origin-top ">
                            {% if get_user() %}
                            <li class="mr-5 d-flex align-items-center" style="font-size: 1.2rem">
                                   Bienvenue,  {{ get_user().lastName}} {{ get_user().firstName }}
                            </li>
                                {% else %}
                                    <li>
                                        <p>Vous n'êtes pas connecté.</p>
                                    </li>

                                {% endif %}

                            <li class="d-flex align-items-center">
                            <a href="{{ path('app_logout') }}">
                                <button class="p-button p-component p-button-rounded p-button-danger mr-2 p-button-icon-only">
                                    <span class="p-button-icon p-c fa fa-power-off"></span>
                                    <span class="p-button-label p-c">&nbsp;</span>
                                    <span class="p-ink"></span>
                                </button>
                            </a>

                            </li>
                        </ul>
                    </div>
                    <div class="layout-sidebar">
                        <div class="layout-menu-container">
                            <ul class="layout-menu" role="menu">
                                <li class="layout-menuitem-category" role="none">
                                    <div class="layout-menuitem-root-text" aria-label="Accueil">Accueil</div>
                                    <ul role="menu">
                                        <li class="" role="none">
                                            <a aria-current="page" class="p-ripple router-link-active router-link-exact-active" aria-label="Tableau de bord" role="menuitem" href="{{ path('main.index') }}">
                                                <i class="fa fa-home"></i>
                                                <span>Tableau de bord</span>
                                                <span class="p-ink"></span>
                                            </a>
                                        </li>
                                    </ul>
                                </li>
                            {% if is_granted('ROLE_CHEF_PARC') or is_granted('ROLE_CABINET') %}
                                <li class="layout-menuitem-category" role="none">
                                    <div class="layout-menuitem-root-text" aria-label="Gestion des matériels roulants">Gestion des matériels roulants</div>
                                    <ul role="menu">
                                        <li class="" role="none">
                                            <a class="p-ripple" aria-label="Type matériel roulant" role="menuitem" href="{{ path('TypeVehicule.index') }}">
                                                <i class="fa fa-list"></i>
                                                <span>Type matériel roulant</span>
                                                <span class="p-ink"></span>
                                            </a>
                                        </li>
                                        <li class="" role="none">
                                            <a class="p-ripple" aria-label="véhicule" role="menuitem" href="{{ path('vehicule.index') }}">
                                                <i class="fa fa-car"></i>
                                                <span>Véhicule</span><span class="p-ink"></span>
                                            </a>
                                        </li>
                                        <li class="" role="none">
                                            <a class="p-ripple" aria-label="assurance" role="menuitem" href="{{ path('assurance.index') }}">
                                                <i class="fa fa-folder"></i>
                                                <span>Assurance</span><span class="p-ink"></span>
                                            </a>
                                        </li>
                                        <li class="" role="none">
                                            <a class="p-ripple" aria-label="visite" role="menuitem" href="{{ path('visite.index') }}">
                                                <i class="fa fa-tools"></i>
                                                <span>visite technique</span><span class="p-ink"></span>
                                            </a>
                                        </li>
                                        <li class="" role="none">
                                            <a class="p-ripple" aria-label="vidange" role="menuitem" href="{{ path('vidange.index') }}">
                                                <i class="fas fa-wrench"></i>
                                                <span>Vidange</span><span class="p-ink"></span>
                                            </a>
                                        </li>
                                    </ul>
                                </li>
                                <li class="layout-menuitem-category" role="none">
                                    <div class="layout-menuitem-root-text" aria-label="Gestion des Cva">Gestion des Cva</div>
                                    <ul role="menu">
                                        <li class="" role="none">
                                            <a class="p-ripple" aria-label="Cva" role="menuitem" href="{{ path('chauffeur.index') }}">
                                                <i class="fa fa-id-badge"></i>
                                                <span>Cva</span>
                                                <span class="p-ink"></span>
                                            </a>
                                        </li>
                                        <li class="" role="none">
                                            <a class="p-ripple" aria-label="Disponibilité en Cva" role="menuitem" href="#/disponibiliteChauffeur">
                                                <i class="fa fa-user-check"></i>
                                                <span>Disponibilité en Cva</span>
                                                <span class="p-ink"></span>
                                            </a>
                                        </li>

                                    </ul>
                                </li>


                                <li class="layout-menuitem-category" role="none">
                                    <div class="layout-menuitem-root-text" aria-label="Gestion des Cva">Gestion du parc</div>
                                    <ul role="menu">
                                        <li class="" role="none">
                                            <a class="p-ripple" aria-label="Cva" role="menuitem" href="{{ path('parc.index') }}">
                                                <i class="fas fa-truck"></i>
                                                <span>Parc</span>
                                                <span class="p-ink"></span>
                                            </a>
                                        </li>
                                    </ul>
                                </li>
                            {% endif %}


             
                                <li class="layout-menuitem-category" role="none">
                                    <div class="layout-menuitem-root-text" aria-label="Gestion des missions">Gestion des missions</div>
                                    <ul role="menu">
                                        <li class="" role="none">
                                            <a class="p-ripple" aria-label="Demande de véhicule" role="menuitem" href="{{ path('demande.index') }}">

                                                {% if is_granted('ROLE_POINT_FOCAL') and not is_granted('ROLE_ADMIN') %}
                                                    <i class="fa fa-car"></i><span>Demander véhicules</span>
                                                {% endif %}
                                                {% if (is_granted('ROLE_RESPONSABLE_STRUCTURE') and not is_granted('ROLE_CHEF_PARC')) and not is_granted('ROLE_ADMIN')  %}
                                                    <i class="fa fa-car"></i> <span>Traiter demandes</span>
                                                {% endif %}
                                                <span class="p-ink"></span>
                                            </a>
                                        </li>


                                            <li class="" role="none">
                                                <a class="p-ripple" aria-label="Demandes approuvées" role="menuitem" href="{{ path('demande.approuvees') }}">
                                                    <i class="fa fa-check-circle"></i>
                                                    {% if (is_granted('ROLE_CHEF_PARC') and not is_granted('ROLE_RESPONSABLE_STRUCTURE')) and not is_granted('ROLE_ADMIN')  %}
                                                        <span>Traiter demandes</span>
                                                    {% else %}
                                                        <span>Demandes approuvées</span>
                                                    {% endif %}
                                                    <span class="p-ink"></span>
                                                </a>
                                            </li>

                                            {% if (is_granted('ROLE_CHEF_PARC') and not is_granted('ROLE_RESPONSABLE_STRUCTURE')) and not is_granted('ROLE_ADMIN')  %}
                                                <li class="" role="none">
                                                    <a class="p-ripple" aria-label="Finaliser demandes" role="menuitem" href="{{ path('demandes.expirees') }}">
                                                        <i class="fa fa-tasks"></i>
                                                        <span>Valider retour mission</span>
                                                        <span class="p-ink"></span>
                                                    </a>
                                                </li>
                                            {% endif %}
                                        <li class="" role="none">
                                            <a class="p-ripple" aria-label="Demandes rejetées" role="menuitem" href="{{ path('demande.rejetees') }}">
                                                <i class="fa fa-times-circle"></i>
                                                <span>Demandes rejetées</span>
                                                <span class="p-ink"></span>
                                            </a>
                                        </li>

                                        <li class="" role="none">
                                            <a class="p-ripple" aria-label="Demandes validées" role="menuitem" href="{{ path('demande.validees') }}">
                                                <i class="fa fa-check-square"></i>
                                                <span>Demandes validées</span>
                                                <span class="p-ink"></span>
                                            </a>
                                        </li>

                                        <li class="" role="none">
                                            <a class="p-ripple" aria-label="Retour de mission validés" role="menuitem" href="{{ path('demande.finalisees') }}">
                                                <i class="fa fa-check-square"></i>
                                                <span>Retour de mission validés</span>
                                                <span class="p-ink"></span>
                                            </a>
                                        </li>
                                    </ul>


                                </li>

                            {% if is_granted('ROLE_ADMIN') %}

                            <li class="layout-menuitem-category" role="none">
                                <div class="layout-menuitem-root-text" aria-label=" Autres paramètres"> Géhohihérarchie </div>
                                <ul role="menu">
                                    <li class="" role="none">
                                        <a class="p-ripple" aria-label="Département" role="menuitem" href="{{ path('departement.index') }}">
                                            <i class="fa fa-sitemap"></i>
                                            <span>Département</span>
                                            <span class="p-ink"></span>
                                        </a>
                                    </li>
                                    <li class="" role="none">
                                        <a class="p-ripple" aria-label="Commune" role="menuitem" href="{{ path('commune.index') }}">
                                            <i class=" fa fa-city"></i>
                                            <span>Commune</span>
                                            <span class="p-ink"></span>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                                    
                                    
                                <li class="layout-menuitem-category" role="none">
                                    <div class="layout-menuitem-root-text" aria-label=" Autres paramètres"> Autres paramètres</div>
                                    <ul role="menu">
                                        <li class="" role="none">
                                            <a class="p-ripple" aria-label="Institution" role="menuitem" href="{{ path('institution.index') }}">
                                                <i class="fa fa-building"></i>
                                                <span>Institution</span>
                                                <span class="p-ink"></span>
                                            </a>
                                        </li>
                                        <li class="" role="none">
                                            <a class="p-ripple" aria-label="Niveau" role="menuitem" href="{{ path('niveau.index') }}">
                                                <i class="fa fa-signal"></i>
                                                <span>Niveau</span>
                                                <span class="p-ink"></span>
                                            </a>
                                        </li>
                                        <li class="" role="none">
                                            <a class="p-ripple" aria-label="TypeStructure" role="menuitem" href="{{ path('TypeStructure.index') }}">
                                                <i class="fa fa-project-diagram"></i>
                                                <span>Type Structure</span>
                                                <span class="p-ink"></span>
                                            </a>
                                        </li>
                                        <li class="" role="none">
                                            <a class="p-ripple" aria-label="Structure" role="menuitem" href="{{ path('structure.index') }}">
                                                <i class="fa fa-th-large"></i>
                                                <span>Structure</span>
                                                <span class="p-ink"></span>
                                            </a>
                                        </li>
                                    </ul>
                                </li>
                                <li class="layout-menuitem-category" role="none">
                                    <div class="layout-menuitem-root-text" aria-label="Administration">Administration</div>
                                    <ul role="menu">
                                        <li class="" role="none">
                                            <a class="p-ripple" aria-label="Utilisateur" role="menuitem" href="{{ path('user.index') }}">
                                                <i class="fa fa-users"></i>
                                                <span>Utilisateur</span>
                                                <span class="p-ink"></span>
                                            </a>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        {% endif %}
                        </div>
                    </div>


            <div class="layout-main-container">
                <div class="layout-main">
                    <div class="grid">
                        {% block mycontent %}
                        <div class="grid">
















                                {% block mycards %}
                                <div class="col-12 mb-2">
                                    <div class="card h-100">
                                        <div class="card-body d-flex justify-content-between align-items-center">
                                            <div>
                                                <h5 class="card-title">Nombre de demandes en attente</h5>
                                                <p class="card-text text-900 font-medium text-xl">{{ nombre_demandes_validees }}</p>
                                            </div>
                                            <div class="d-flex align-items-center justify-content-center bg-red-100 border-round" style="width: 2.5rem; height: 2.5rem;">
                                                <i class="fa fa-check-circle text-red-500 text-xl"></i>
                                            </div>
                                        </div>
                                        <div class="card-footer">
                                            <span class="text-green-500 font-medium">24 new </span>
                                            <span class="text-500">since last visit</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-12 mb-2">
                                    <div class="card h-100">
                                        <div class="card-body d-flex justify-content-between align-items-center">
                                            <div>
                                                <h5 class="card-title">Nbr de demande</h5>
                                                <p class="card-text text-900 font-medium text-xl">--</p>
                                            </div>
                                            <div class="d-flex align-items-center justify-content-center bg-orange-100 border-round" style="width: 2.5rem; height: 2.5rem;">
                                                <i class="fa fa-map-marker text-orange-500 text-xl"></i>
                                            </div>
                                        </div>
                                        <div class="card-footer">
                                            <span class="text-green-500 font-medium">%52+ </span>
                                            <span class="text-500">since last week</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-12 mb-2">
                                    <div class="card h-100">
                                        <div class="card-body d-flex justify-content-between align-items-center">
                                            <div>
                                                <h5 class="card-title">Total véhicule approuvé</h5>
                                                <p class="card-text text-900 font-medium text-xl">28441</p>
                                            </div>
                                            <div class="d-flex align-items-center justify-content-center bg-cyan-100 border-round" style="width: 2.5rem; height: 2.5rem;">
                                                <i class="fa fa-inbox text-cyan-500 text-xl"></i>
                                            </div>
                                        </div>
                                        <div class="card-footer">
                                            <span class="text-green-500 font-medium">520 </span>
                                            <span class="text-500">newly registered</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-12 mb-2">
                                    <div class="card h-100">
                                        <div class="card-body d-flex justify-content-between align-items-center">
                                            <div>
                                                <h5 class="card-title">Retour de mission</h5>
                                                <p class="card-text text-900 font-medium text-xl">--</p>
                                            </div>
                                            <div class="d-flex align-items-center justify-content-center bg-red-100 border-round" style="width: 2.5rem; height: 2.5rem;">
                                                <i class="fa fa-check-circle text-red-500 text-xl"></i>
                                            </div>
                                        </div>
                                        <div class="card-footer">
                                            <span class="text-green-500 font-medium">-- </span>
                                            <span class="text-500">newly registered</span>
                                        </div>
                                    </div>
                                </div>
                                {% endblock %}
























                            </div>
                        </div></div>
                        {% endblock %}
                    </div>
                </div>
            </div>
        </div>
            </div>










    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            document.querySelectorAll('.flash-close').forEach(button => {
                button.addEventListener('click', () => {
                    button.parentElement.style.display = 'none';
                });
            });
        });
    </script> 



    <script>
        $(document).ready(function() {
            // you may need to change this code if you are not using Bootstrap Datepicker
            $('.js-datepicker').datepicker({
                format: 'yyyy-mm-dd'
            });
        });
        </script>

    <script>
        function openImageModal(imageUrl) {
            const width = 800; // Largeur de la fenêtre modale
            const height = 600; // Hauteur de la fenêtre modale
            const left = (window.screen.width - width) / 2;
            const top = (window.screen.height - height) / 2;
    
            const modalWindow = window.open(imageUrl, '_blank', `width=${width},height=${height},left=${left},top=${top}`);
            modalWindow.document.write(`
                <html>
                <head>
                    <title>Image</title>
                </head>
                <body>
                    <img src="${imageUrl}" alt="Image">
                    {# <button onclick="window.close()">Fermer</button> #}
                </body>
                </html>
            `);
        }
    </script>

    <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
    <script charset="utf-8" src="{{ asset('js/3.d3d46a21.chunk.js') }}"></script> 
    <script src="vendor/chart.js/Chart.min.js"></script>
    <script src="{{ asset('js/chart-area-demo.js') }}"></script>

    <script src="{{ asset('vendor/jquery/jquery.min.js') }}"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ asset('vendor/jquery-easing/jquery.easing.min.js') }}"></script>
    <script src="{{ asset('js/sb-admin-2.min.js') }}"></script>
    <script src="{{ asset('vendor/datatables/jquery.dataTables.min.js') }}"></script>
    <script src="{{ asset('vendor/datatables/dataTables.bootstrap4.min.js') }}"></script>
    <script src="{{ asset('js/demo/datatables-demo.js') }}"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<!-- Page level plugins -->
<script src="{{ asset('vendor/datatables/jquery.dataTables.min.js') }}"></script>
<script src="{{ asset('vendor/datatables/dataTables.bootstrap4.min.js') }}"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>

    {% endblock %}
    </body>
</html>