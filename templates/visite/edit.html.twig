{% extends 'base.html.twig' %}

{% block mycontent %}
        <div class="col-12" >
            <div class="card card-content-template" >
                <div class="p-toolbar-group-left">
                    <div class="my-2">
                        <a href="{{ path('visite.index') }}">
                            <button class="p-button p-component p-button-outlined mr-2">
                                <span class="p-button-icon p-c p-button-icon-left fa fa-arrow-left"></span>
                                <span class="p-button-label p-c">Retour à la liste</span>
                                <span class="p-ink"></span>
                            </button>
                        </a>
                    </div>
                </div>
                <h5>Modifier une visite</h5>
                {{ include('visite/_form.html.twig', {'mode': 'edit'}) }}
            </div>
        </div>

        <script>
            document.addEventListener('DOMContentLoaded', function() {
                var pieceVisiteUrl = document.querySelector('input[name="pieceVisiteUrl"]').value;
                if (pieceVisiteUrl) {
                    var link = document.getElementById('current-piece-link');
                    link.href = "{{ asset('img/Visites/') }}" + '/' + pieceVisiteUrl;
                    link.textContent = 'Voir la pièce actuelle';
        
                    // Hide the "Aucun fichier choisi" text if a piece exists
                    var noFileText = document.getElementById('no-file-text');
                    if (noFileText) {
                        noFileText.style.display = 'none';
                    }
                } else {
                    var link = document.getElementById('current-piece-link');
                    if (link) {
                        link.style.display = 'none';
                    }
                }
            });
        </script>

{% endblock %}


